<?php class media extends masterclass{	function extend(){ 		$this->options = 			array(				'type' => array ( 					0 => 'undefined',					1 => 'img',				/*	2 => 'video/youtube',					3 => 'video/vk' */				),			);					$this->sql['items'] .= ' ORDER BY id DESC';		}					function save(){		$check = DBcell("SELECT id FROM media WHERE url LIKE '%{$this->post['form']['url']}'"); //die($check);		if($check < 1 || $this->id > 0) { //if link don't exist or link exist, but we don't add new but update old, we save			$tags = $this->post['form']['tags']; //die(inspect($tags));			unset($this->post['form']['tags']);			parent :: save();						$taglist = split(',',$tags);			$sql = "DELETE FROM tags_photo WHERE photo_id='{$this->id}'";			DBquery($sql);// echo $sql;			if($taglist[0] != ''){				foreach ($taglist as $tag){					$tag = trim($tag);						$sql = "INSERT INTO	tags_photo SET photo_id='{$this->id}', tag='$tag'";					DBquery($sql); //echo $sql;				}			}					} else { //otherwise return id of image - that's for api			$this->id = $check;		}			}	} ?>